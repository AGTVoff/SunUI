-- src/window.lua
return function(SunUI)
    local Window = {}
    local Theme = SunUI.Theme
    local Utils = SunUI.Utils
    local Core = SunUI.Core
    local Components = SunUI.Components

    function Window:Create(title)
        local Gui = Core:Init(title)
        local Frame = Instance.new("Frame", Gui)
        Frame.Size = UDim2.new(0, 500, 0, 350)
        Frame.Position = UDim2.new(0.5, -250, 0.5, -175)
        Frame.BackgroundColor3 = Theme.Background
        Frame.BorderSizePixel = 0
        Instance.new("UICorner", Frame).CornerRadius = Theme.CornerRadius

        local Border = Instance.new("UIStroke", Frame)
        Border.Thickness = Theme.BorderThickness
        task.spawn(function()
            while task.wait(0.05) do
                Border.Color = Theme:GetRGBColor(tick())
            end
        end)

        local Title = Instance.new("TextLabel", Frame)
        Title.Size = UDim2.new(1, 0, 0, 35)
        Title.BackgroundTransparency = 1
        Title.Text = title
        Title.Font = Enum.Font.GothamBold
        Title.TextSize = 20
        Title.TextColor3 = Theme.Accent

        Utils:MakeDraggable(Frame, Title)

        local TabFolder = Instance.new("Folder", Frame)
        TabFolder.Name = "Tabs"

        function Frame:AddTab(name)
            return Components:CreateTab(TabFolder, name, Theme)
        end

        return Frame
    end

    return Window
end
